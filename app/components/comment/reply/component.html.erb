<article class="comment">
  <div class="flex gap-3 items-center">
    <div class="flex items-center gap-2">
      <span class="avatar"></span>
      <p class="text-sm"><%= reply.user.email %></p>
    </div>
    <span class="dot-divider mt-1"></span>
    <p class="text-sm"><%= time_ago_in_words(reply.created_at) %> ago</p>
    <div class="flex gap-4 items-center ml-auto">
      <%= turbo_frame_tag(dom_id(reply, :controls)) do %>
        <% if author %>
          <%= render(partial: 'replies/controls', locals: { reply: }) %>
        <% else %>
          <% if author_of_post? %>
            <span class="badge">
              Author of post
            </span>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
  <%= turbo_stream_from(dom_id(reply, :content)) %>
  <%= render(partial: 'replies/content', locals: { reply: reply }) %>
  <div>
    <%= turbo_stream_from(dom_id(reply, :like_count), class: "absolute") %>
    <%= turbo_frame_tag(dom_id(reply, :likes)) do %>
      <% if author || !user %>
        <%= render(partial: 'partials/like', locals: { target: reply }) %>
      <% else %>
        <%= render(partial: 'partials/like_form', locals: { user:, target: reply, path: toggle_like_comment_reply_path(reply.comment, reply) }) %>
      <% end %>
    <% end %>
  </div>
</article>